{"ast":null,"code":"var _jsxFileName = \"E:\\\\Creative\\\\App\\\\dms\\\\client\\\\src\\\\components\\\\SellerSaleForm.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport apiClient from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SellerSaleForm({\n  onSaved\n}) {\n  _s();\n  const [items, setItems] = React.useState([]);\n  const [paymentMethod, setPaymentMethod] = React.useState('Mpesa');\n  const addLine = product => setItems(prev => [...prev, {\n    productId: product._id,\n    name: product.name,\n    qty: 1,\n    unitPrice: product.sellPrice\n  }]);\n  const updateLine = (i, key, val) => {\n    const copy = items.slice();\n    copy[i][key] = key === 'qty' || key === 'unitPrice' ? Number(val) : val;\n    setItems(copy);\n  };\n  const removeLine = i => setItems(items.filter((_, idx) => idx !== i));\n  const submit = async () => {\n    if (items.length === 0) return alert('Add items');\n    const payload = {\n      type: 'sale',\n      items: items.map(it => ({\n        productId: it.productId,\n        qty: it.qty,\n        unitPrice: it.unitPrice\n      })),\n      paymentMethod\n    };\n    try {\n      await apiClient.api('/api/transactions', {\n        method: 'POST',\n        body: JSON.stringify(payload),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      setItems([]);\n      if (onSaved) onSaved();\n      alert('Sale recorded');\n    } catch (err) {\n      alert(err.message || 'Save failed');\n    }\n  };\n  const total = items.reduce((s, i) => s + i.qty * i.unitPrice, 0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontWeight: 700,\n          marginBottom: 8\n        },\n        children: \"Sale\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Payment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 25,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          className: \"input\",\n          value: paymentMethod,\n          onChange: e => setPaymentMethod(e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Mpesa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"AirtelMoney\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 35\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Cash\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 63\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            children: \"Bank\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 27,\n            columnNumber: 84\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8\n        },\n        children: items.map((it, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: 8,\n            marginBottom: 6\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              flex: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontWeight: 700\n              },\n              children: it.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 33,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 33,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            style: {\n              width: 80\n            },\n            type: \"number\",\n            value: it.qty,\n            onChange: e => updateLine(i, 'qty', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 34,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"input\",\n            style: {\n              width: 100\n            },\n            type: \"number\",\n            value: it.unitPrice,\n            onChange: e => updateLine(i, 'unitPrice', e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 35,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn\",\n            onClick: () => removeLine(i),\n            children: \"X\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 15\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          marginTop: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontWeight: 700\n          },\n          children: [\"Total: \", total, \" TZS\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: submit,\n          children: \"Complete Sale\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 8\n      },\n      children: /*#__PURE__*/_jsxDEV(\"slot\", {\n        name: \"search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n}\n_s(SellerSaleForm, \"WF6eZ0lVnEHt1/f5LvYL4RqxUfs=\");\n_c = SellerSaleForm;\nvar _c;\n$RefreshReg$(_c, \"SellerSaleForm\");","map":{"version":3,"names":["React","apiClient","jsxDEV","_jsxDEV","SellerSaleForm","onSaved","_s","items","setItems","useState","paymentMethod","setPaymentMethod","addLine","product","prev","productId","_id","name","qty","unitPrice","sellPrice","updateLine","i","key","val","copy","slice","Number","removeLine","filter","_","idx","submit","length","alert","payload","type","map","it","api","method","body","JSON","stringify","headers","err","message","total","reduce","s","children","className","style","fontWeight","marginBottom","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","marginTop","display","gap","flex","width","onClick","justifyContent","alignItems","_c","$RefreshReg$"],"sources":["E:/Creative/App/dms/client/src/components/SellerSaleForm.jsx"],"sourcesContent":["import React from 'react';\r\nimport apiClient from '../services/api';\r\n\r\nexport default function SellerSaleForm({ onSaved }) {\r\n  const [items, setItems] = React.useState([]);\r\n  const [paymentMethod, setPaymentMethod] = React.useState('Mpesa');\r\n  const addLine = (product) => setItems(prev => [...prev, { productId: product._id, name: product.name, qty:1, unitPrice: product.sellPrice }]);\r\n  const updateLine = (i, key, val) => { const copy = items.slice(); copy[i][key] = key==='qty' || key==='unitPrice' ? Number(val) : val; setItems(copy); };\r\n  const removeLine = (i) => setItems(items.filter((_,idx)=>idx!==i));\r\n  const submit = async () => {\r\n    if (items.length===0) return alert('Add items');\r\n    const payload = { type:'sale', items: items.map(it=>({ productId: it.productId, qty: it.qty, unitPrice: it.unitPrice })), paymentMethod };\r\n    try {\r\n      await apiClient.api('/api/transactions', { method:'POST', body: JSON.stringify(payload), headers: {'Content-Type':'application/json'} });\r\n      setItems([]); if (onSaved) onSaved();\r\n      alert('Sale recorded');\r\n    } catch (err) { alert(err.message || 'Save failed'); }\r\n  };\r\n  const total = items.reduce((s,i)=>s + (i.qty*i.unitPrice), 0);\r\n  return (\r\n    <div>\r\n      <div className=\"card\">\r\n        <div style={{fontWeight:700, marginBottom:8}}>Sale</div>\r\n        <div>\r\n          <label>Payment</label>\r\n          <select className=\"input\" value={paymentMethod} onChange={e=>setPaymentMethod(e.target.value)}>\r\n            <option>Mpesa</option><option>AirtelMoney</option><option>Cash</option><option>Bank</option>\r\n          </select>\r\n        </div>\r\n        <div style={{marginTop:8}}>\r\n          {items.map((it,i)=>(\r\n            <div key={i} style={{display:'flex', gap:8, marginBottom:6}}>\r\n              <div style={{flex:1}}><div style={{fontWeight:700}}>{it.name}</div></div>\r\n              <input className=\"input\" style={{width:80}} type=\"number\" value={it.qty} onChange={e=>updateLine(i,'qty',e.target.value)} />\r\n              <input className=\"input\" style={{width:100}} type=\"number\" value={it.unitPrice} onChange={e=>updateLine(i,'unitPrice',e.target.value)} />\r\n              <button className=\"btn\" onClick={()=>removeLine(i)}>X</button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginTop:8}}>\r\n          <div style={{fontWeight:700}}>Total: {total} TZS</div>\r\n          <button className=\"btn\" onClick={submit}>Complete Sale</button>\r\n        </div>\r\n      </div>\r\n      <div style={{marginTop:8}}>\r\n        <slot name=\"search\"></slot>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _objectSpread from\"C:/Users/mazik/AppData/Roaming/npm/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE=process.env.REACT_APP_API_BASE||'http://localhost:4000';export async function api(path){let opts=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const headers=Object.assign({},opts.headers||{});const token=localStorage.getItem('token');if(token)headers['Authorization']=\"Bearer \".concat(token);const res=await fetch(\"\".concat(API_BASE).concat(path),_objectSpread(_objectSpread({},opts),{},{headers}));const txt=await res.text().catch(()=>null);let json=null;try{json=txt?JSON.parse(txt):null;}catch(e){json=txt;}if(!res.ok)throw new Error(json&&json.error||res.statusText||'API error');return json;}export default{api};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","api","path","opts","arguments","length","undefined","headers","Object","assign","token","localStorage","getItem","concat","res","fetch","_objectSpread","txt","text","catch","json","JSON","parse","e","ok","Error","error","statusText"],"sources":["E:/Creative/App/dms/client/src/services/api.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000';\r\nexport async function api(path, opts={}) {\r\n  const headers = Object.assign({}, opts.headers || {});\r\n  const token = localStorage.getItem('token');\r\n  if (token) headers['Authorization'] = `Bearer ${token}`;\r\n  const res = await fetch(`${API_BASE}${path}`, { ...opts, headers });\r\n  const txt = await res.text().catch(()=>null);\r\n  let json = null;\r\n  try { json = txt ? JSON.parse(txt) : null; } catch(e) { json = txt; }\r\n  if (!res.ok) throw new Error((json && json.error) || res.statusText || 'API error');\r\n  return json;\r\n}\r\nexport default { api };"],"mappings":"kJAAA,KAAM,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,EAAI,uBAAuB,CAC1E,MAAO,eAAe,CAAAC,GAAGA,CAACC,IAAI,CAAW,IAAT,CAAAC,IAAI,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAC,CAAC,CAAC,CACrC,KAAM,CAAAG,OAAO,CAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,CAAEN,IAAI,CAACI,OAAO,EAAI,CAAC,CAAC,CAAC,CACrD,KAAM,CAAAG,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAEH,OAAO,CAAC,eAAe,CAAC,WAAAM,MAAA,CAAaH,KAAK,CAAE,CACvD,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAF,MAAA,CAAIhB,QAAQ,EAAAgB,MAAA,CAAGX,IAAI,EAAAc,aAAA,CAAAA,aAAA,IAASb,IAAI,MAAEI,OAAO,EAAE,CAAC,CACnE,KAAM,CAAAU,GAAG,CAAG,KAAM,CAAAH,GAAG,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,IAAI,CAAC,CAC5C,GAAI,CAAAC,IAAI,CAAG,IAAI,CACf,GAAI,CAAEA,IAAI,CAAGH,GAAG,CAAGI,IAAI,CAACC,KAAK,CAACL,GAAG,CAAC,CAAG,IAAI,CAAE,CAAE,MAAMM,CAAC,CAAE,CAAEH,IAAI,CAAGH,GAAG,CAAE,CACpE,GAAI,CAACH,GAAG,CAACU,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAEL,IAAI,EAAIA,IAAI,CAACM,KAAK,EAAKZ,GAAG,CAACa,UAAU,EAAI,WAAW,CAAC,CACnF,MAAO,CAAAP,IAAI,CACb,CACA,cAAe,CAAEnB,GAAI,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
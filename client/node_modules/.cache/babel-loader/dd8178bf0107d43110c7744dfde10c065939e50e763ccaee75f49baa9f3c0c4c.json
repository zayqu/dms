{"ast":null,"code":"const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000';\nexport async function api(path, opts = {}) {\n  const headers = Object.assign({}, opts.headers || {});\n  const token = localStorage.getItem('token');\n  if (token) headers['Authorization'] = `Bearer ${token}`;\n  const res = await fetch(`${API_BASE}${path}`, {\n    ...opts,\n    headers\n  });\n  const txt = await res.text().catch(() => null);\n  let json = null;\n  try {\n    json = txt ? JSON.parse(txt) : null;\n  } catch (e) {\n    json = txt;\n  }\n  if (!res.ok) throw new Error(json && json.error || res.statusText || 'API error');\n  return json;\n}\nexport default {\n  api\n};","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE","api","path","opts","headers","Object","assign","token","localStorage","getItem","res","fetch","txt","text","catch","json","JSON","parse","e","ok","Error","error","statusText"],"sources":["E:/Creative/App/dms/client/src/services/api.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE || 'http://localhost:4000';\r\nexport async function api(path, opts={}) {\r\n  const headers = Object.assign({}, opts.headers || {});\r\n  const token = localStorage.getItem('token');\r\n  if (token) headers['Authorization'] = `Bearer ${token}`;\r\n  const res = await fetch(`${API_BASE}${path}`, { ...opts, headers });\r\n  const txt = await res.text().catch(()=>null);\r\n  let json = null;\r\n  try { json = txt ? JSON.parse(txt) : null; } catch(e) { json = txt; }\r\n  if (!res.ok) throw new Error((json && json.error) || res.statusText || 'API error');\r\n  return json;\r\n}\r\nexport default { api };"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAACC,kBAAkB,IAAI,uBAAuB;AAC1E,OAAO,eAAeC,GAAGA,CAACC,IAAI,EAAEC,IAAI,GAAC,CAAC,CAAC,EAAE;EACvC,MAAMC,OAAO,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEH,IAAI,CAACC,OAAO,IAAI,CAAC,CAAC,CAAC;EACrD,MAAMG,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAIF,KAAK,EAAEH,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUG,KAAK,EAAE;EACvD,MAAMG,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGd,QAAQ,GAAGK,IAAI,EAAE,EAAE;IAAE,GAAGC,IAAI;IAAEC;EAAQ,CAAC,CAAC;EACnE,MAAMQ,GAAG,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAI,IAAI,CAAC;EAC5C,IAAIC,IAAI,GAAG,IAAI;EACf,IAAI;IAAEA,IAAI,GAAGH,GAAG,GAAGI,IAAI,CAACC,KAAK,CAACL,GAAG,CAAC,GAAG,IAAI;EAAE,CAAC,CAAC,OAAMM,CAAC,EAAE;IAAEH,IAAI,GAAGH,GAAG;EAAE;EACpE,IAAI,CAACF,GAAG,CAACS,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAEL,IAAI,IAAIA,IAAI,CAACM,KAAK,IAAKX,GAAG,CAACY,UAAU,IAAI,WAAW,CAAC;EACnF,OAAOP,IAAI;AACb;AACA,eAAe;EAAEd;AAAI,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
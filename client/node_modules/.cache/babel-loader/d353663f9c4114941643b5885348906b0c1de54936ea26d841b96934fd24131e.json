{"ast":null,"code":"// File: dms/client/src/utils/sw-idb.js\n// small idb helper using \"idb\" library so the SW and main thread can share store name/format\nimport{openDB}from'idb';const DB_NAME='dms-sw-db';const STORE_NAME='sw_requests';export async function getDb(){return openDB(DB_NAME,1,{upgrade(db){if(!db.objectStoreNames.contains(STORE_NAME)){db.createObjectStore(STORE_NAME,{keyPath:'id'});}}});}export async function addSwRequest(obj){const db=await getDb();await db.put(STORE_NAME,obj);}export async function getAllSwRequests(){const db=await getDb();return db.getAll(STORE_NAME);}export async function deleteSwRequest(id){const db=await getDb();return db.delete(STORE_NAME,id);}","map":{"version":3,"names":["openDB","DB_NAME","STORE_NAME","getDb","upgrade","db","objectStoreNames","contains","createObjectStore","keyPath","addSwRequest","obj","put","getAllSwRequests","getAll","deleteSwRequest","id","delete"],"sources":["E:/Creative/App/dms/client/src/utils/sw-idb.js"],"sourcesContent":["// File: dms/client/src/utils/sw-idb.js\r\n// small idb helper using \"idb\" library so the SW and main thread can share store name/format\r\nimport { openDB } from 'idb';\r\nconst DB_NAME = 'dms-sw-db';\r\nconst STORE_NAME = 'sw_requests';\r\n\r\nexport async function getDb() {\r\n  return openDB(DB_NAME, 1, {\r\n    upgrade(db) {\r\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n        db.createObjectStore(STORE_NAME, { keyPath: 'id' });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport async function addSwRequest(obj) {\r\n  const db = await getDb();\r\n  await db.put(STORE_NAME, obj);\r\n}\r\n\r\nexport async function getAllSwRequests() {\r\n  const db = await getDb();\r\n  return db.getAll(STORE_NAME);\r\n}\r\n\r\nexport async function deleteSwRequest(id) {\r\n  const db = await getDb();\r\n  return db.delete(STORE_NAME, id);\r\n}"],"mappings":"AAAA;AACA;AACA,OAASA,MAAM,KAAQ,KAAK,CAC5B,KAAM,CAAAC,OAAO,CAAG,WAAW,CAC3B,KAAM,CAAAC,UAAU,CAAG,aAAa,CAEhC,MAAO,eAAe,CAAAC,KAAKA,CAAA,CAAG,CAC5B,MAAO,CAAAH,MAAM,CAACC,OAAO,CAAE,CAAC,CAAE,CACxBG,OAAOA,CAACC,EAAE,CAAE,CACV,GAAI,CAACA,EAAE,CAACC,gBAAgB,CAACC,QAAQ,CAACL,UAAU,CAAC,CAAE,CAC7CG,EAAE,CAACG,iBAAiB,CAACN,UAAU,CAAE,CAAEO,OAAO,CAAE,IAAK,CAAC,CAAC,CACrD,CACF,CACF,CAAC,CAAC,CACJ,CAEA,MAAO,eAAe,CAAAC,YAAYA,CAACC,GAAG,CAAE,CACtC,KAAM,CAAAN,EAAE,CAAG,KAAM,CAAAF,KAAK,CAAC,CAAC,CACxB,KAAM,CAAAE,EAAE,CAACO,GAAG,CAACV,UAAU,CAAES,GAAG,CAAC,CAC/B,CAEA,MAAO,eAAe,CAAAE,gBAAgBA,CAAA,CAAG,CACvC,KAAM,CAAAR,EAAE,CAAG,KAAM,CAAAF,KAAK,CAAC,CAAC,CACxB,MAAO,CAAAE,EAAE,CAACS,MAAM,CAACZ,UAAU,CAAC,CAC9B,CAEA,MAAO,eAAe,CAAAa,eAAeA,CAACC,EAAE,CAAE,CACxC,KAAM,CAAAX,EAAE,CAAG,KAAM,CAAAF,KAAK,CAAC,CAAC,CACxB,MAAO,CAAAE,EAAE,CAACY,MAAM,CAACf,UAAU,CAAEc,EAAE,CAAC,CAClC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
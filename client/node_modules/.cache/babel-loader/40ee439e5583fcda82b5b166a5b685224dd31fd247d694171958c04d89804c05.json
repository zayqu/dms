{"ast":null,"code":"// File: dms/client/src/utils/sw-idb.js\n// small idb helper using \"idb\" library so the SW and main thread can share store name/format\nimport { openDB } from 'idb';\nconst DB_NAME = 'dms-sw-db';\nconst STORE_NAME = 'sw_requests';\nexport async function getDb() {\n  return openDB(DB_NAME, 1, {\n    upgrade(db) {\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\n        db.createObjectStore(STORE_NAME, {\n          keyPath: 'id'\n        });\n      }\n    }\n  });\n}\nexport async function addSwRequest(obj) {\n  const db = await getDb();\n  await db.put(STORE_NAME, obj);\n}\nexport async function getAllSwRequests() {\n  const db = await getDb();\n  return db.getAll(STORE_NAME);\n}\nexport async function deleteSwRequest(id) {\n  const db = await getDb();\n  return db.delete(STORE_NAME, id);\n}","map":{"version":3,"names":["openDB","DB_NAME","STORE_NAME","getDb","upgrade","db","objectStoreNames","contains","createObjectStore","keyPath","addSwRequest","obj","put","getAllSwRequests","getAll","deleteSwRequest","id","delete"],"sources":["E:/Creative/App/dms/client/src/utils/sw-idb.js"],"sourcesContent":["// File: dms/client/src/utils/sw-idb.js\r\n// small idb helper using \"idb\" library so the SW and main thread can share store name/format\r\nimport { openDB } from 'idb';\r\nconst DB_NAME = 'dms-sw-db';\r\nconst STORE_NAME = 'sw_requests';\r\n\r\nexport async function getDb() {\r\n  return openDB(DB_NAME, 1, {\r\n    upgrade(db) {\r\n      if (!db.objectStoreNames.contains(STORE_NAME)) {\r\n        db.createObjectStore(STORE_NAME, { keyPath: 'id' });\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport async function addSwRequest(obj) {\r\n  const db = await getDb();\r\n  await db.put(STORE_NAME, obj);\r\n}\r\n\r\nexport async function getAllSwRequests() {\r\n  const db = await getDb();\r\n  return db.getAll(STORE_NAME);\r\n}\r\n\r\nexport async function deleteSwRequest(id) {\r\n  const db = await getDb();\r\n  return db.delete(STORE_NAME, id);\r\n}"],"mappings":"AAAA;AACA;AACA,SAASA,MAAM,QAAQ,KAAK;AAC5B,MAAMC,OAAO,GAAG,WAAW;AAC3B,MAAMC,UAAU,GAAG,aAAa;AAEhC,OAAO,eAAeC,KAAKA,CAAA,EAAG;EAC5B,OAAOH,MAAM,CAACC,OAAO,EAAE,CAAC,EAAE;IACxBG,OAAOA,CAACC,EAAE,EAAE;MACV,IAAI,CAACA,EAAE,CAACC,gBAAgB,CAACC,QAAQ,CAACL,UAAU,CAAC,EAAE;QAC7CG,EAAE,CAACG,iBAAiB,CAACN,UAAU,EAAE;UAAEO,OAAO,EAAE;QAAK,CAAC,CAAC;MACrD;IACF;EACF,CAAC,CAAC;AACJ;AAEA,OAAO,eAAeC,YAAYA,CAACC,GAAG,EAAE;EACtC,MAAMN,EAAE,GAAG,MAAMF,KAAK,CAAC,CAAC;EACxB,MAAME,EAAE,CAACO,GAAG,CAACV,UAAU,EAAES,GAAG,CAAC;AAC/B;AAEA,OAAO,eAAeE,gBAAgBA,CAAA,EAAG;EACvC,MAAMR,EAAE,GAAG,MAAMF,KAAK,CAAC,CAAC;EACxB,OAAOE,EAAE,CAACS,MAAM,CAACZ,UAAU,CAAC;AAC9B;AAEA,OAAO,eAAea,eAAeA,CAACC,EAAE,EAAE;EACxC,MAAMX,EAAE,GAAG,MAAMF,KAAK,CAAC,CAAC;EACxB,OAAOE,EAAE,CAACY,MAAM,CAACf,UAAU,EAAEc,EAAE,CAAC;AAClC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}